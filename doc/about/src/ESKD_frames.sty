%  Copyright (C) 2015 Yuri Stepanenko stepanenkoyra@gmail.com

% This program is free software; you can redistribute it
% and/or modify it under the terms of the GNU Library General Public
% License as published by the Free Software Foundation; either version 2
% of the License, or (at your option) any later version.

% The GNU LIBICONV Library is distributed in the hope that it will be
% useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
% Library General Public License for more details. 

% You should have received a copy of the GNU Library General Public
% License along with the 'eskdi'; see the file License.gpl.
% If not, write to the Free Software Foundation, Inc., 59 Temple Place -
% Suite 330, Boston, MA 02111-1307, USA.

\NeedsTeXFormat{LaTeX2e}

\RequirePackage{ifthen}
\RequirePackage{eso-pic}
\RequirePackage{everyshi}
\RequirePackage{lastpage}
\RequirePackage{everypage}

\RequirePackage{for_all_styles}

\ProvidesPackage{ESKD_frames} [2015/09/11 v4.0 GOST Frames]



\newcommand{\DrawBorder}
{%
  \begin{picture}(0,0)%
    \setlength{\unitlength}{1mm}%
    \linethickness{\pcbdoclinethick}%
    \put(0,0){\line(1,0){185}}% нижняя линия
    \put(0,287){\line(1,0){185}}% верхняя линия
    \put(0,0){\line(0,1){287}}% левая линия
    \put(185,0){\line(0,1){287}}% правая линия
  \end{picture}%
}%


\newcommand{\DrawStampFirst}
{%
  \begin{picture}(0,0)%
    \setlength{\unitlength}{1mm}%
    \linethickness{\pcbdoclinethick}%
%    \ifthenelse{\equal{\pcbdocpapersize}{a4}}{}{\put(0,40){\line(0,-1){40}}}%
    \put(0,40){\line(1,0){185}}%
    \put(0,25){\line(1,0){185}}%
    \put(135,20){\line(1,0){50}}%
    \put(135,15){\line(1,0){50}}%
    \put(7,40){\line(0,-1){15}}%
    \put(17,40){\line(0,-1){40}}%
    \put(40,40){\line(0,-1){40}}%
    \put(55,40){\line(0,-1){40}}%
    \put(65,40){\line(0,-1){40}}%
    \put(135,25){\line(0,-1){25}}%
    \put(150,25){\line(0,-1){10}}%
    \put(167,25){\line(0,-1){10}}%
    \linethickness{\pcbdoclinethin}%
    \put(0,35){\line(1,0){65}}%
    \put(0,30){\line(1,0){65}}%
    \put(0,20){\line(1,0){65}}%
    \put(0,15){\line(1,0){65}}%
    \put(0,10){\line(1,0){65}}%
    \put(0,5){\line(1,0){65}}%
    \put(140,20){\line(0,-1){5}}%
    \put(145,20){\line(0,-1){5}}%
    \spformedboxmm{0}{25}{7}{29.1}{tc}{\normalfontit Изм.}
    \spformedboxmm{7}{25}{17}{29.1}{tc}{\normalfontit Лист}
    \spformedboxmm{17}{25}{40}{29.1}{tc}{\normalfontit № докум.}
    \spformedboxmm{40}{25}{55}{29.1}{tc}{\normalfontit Подпись} 
    \spformedboxmm{55}{25}{65}{29.1}{tc}{\normalfontit Дата}
    \spformedboxmm{1}{20}{17}{24.1}{tl}{\normalfontit Разраб.}
    \spformedboxmm{1}{15}{17}{19.1}{tl}{\normalfontit Пров.}
    %\spformedboxmm{1}{10}{17}{14.1}{tl}{\normalfontit }%
    \spformedboxmm{1}{5}{17}{9.1}{tl}{\normalfontit Н. контр.}
    \spformedboxmm{1}{0}{17}{4.1}{tl}{\normalfontit Утв.}

    \spformedboxmm{17.5}{20}{40}{24.1}{tl}{\normalfontit \@gostrazrabotchik}
    \spformedboxmm{17.5}{15}{40}{19.1}{tl}{\normalfontit \@gostproveril}
    %\spformedboxmm{17.5}{10}{40}{14.1}{tl}{\normalfontit }%
    \spformedboxmm{17.5}{5}{40}{9.1}{tl}{\normalfontit \@gostnormokontroler}
    \spformedboxmm{17.5}{0}{40}{4.1}{tl}{\normalfontit \@gostutverdil}
    
    \spformedboxmm{40}{20.7}{55}{25}{bс}{\normalfontit подп.}
    \spformedboxmm{40}{15.7}{55}{20}{bс}{\normalfontit подп.}
    %\spformedboxmm{40}{10}{55}{13.1}{с}{\normalfontit подп.}%
    \spformedboxmm{40}{5.7}{55}{10}{bс}{\normalfontit подп.}
    \spformedboxmm{40}{0.7}{55}{5}{bс}{\normalfontit подп.}    
    
    \spformedboxmm{135}{20}{150}{24.1}{tс}{\normalfontit Лит.}    
    \spformedboxmm{150}{20}{167}{24.1}{tс}{\normalfontit Лист}  
    \spformedboxmm{167}{20}{185}{24.1}{tс}{\normalfontit Листов}  
    
    \spformedboxmm{135}{15}{140}{19.1}{tс}{\normalfontit \@gostliteraI}    
    \spformedboxmm{140}{15}{145}{19.1}{tс}{\normalfontit \@gostliteraII} 

    \spformedboxmm{150}{15}{167}{19.1}{tc}{\normalfontit \thepage}
    \spformedboxmm{167}{15}{185}{19.1}{tc}{\normalfontit \pageref{LastPage}}
    
    \spformedboxmm{65}{30}{185}{35}{tc}{\Largeit \@gostklgi}
 
     \spformedboxmm{55}{20}{65}{24.0}{tc}{\normalfontit \@gostDATErazrabotchik}
    \spformedboxmm{55}{15}{65}{19.0}{tc}{\normalfontit \@gostDATEproveril}
    %\spformedboxmm{55}{10}{65}{14.0}{tc}{\normalfontit }%
    \spformedboxmm{55}{5}{65}{9.0}{tc}{\normalfontit \@gostDATEnormokontroler}
    \spformedboxmm{55}{0}{65}{4.0}{tc}{\normalfontit \@gostDATEutverdil}
      
    \spformedboxmm{10}{-5}{30}{-1.0}{tc}{\normalfontit Ф.2.106-9}
    \spformedboxmm{60}{-5}{80}{-1.0}{tc}{\normalfontit Копировал:}
    \spformedboxmm{145}{-5}{165}{-1.0}{tc}{\normalfontit Формат А4}
    
    \SetTitleDocumentInSecondPage  
  \end{picture}%
}%


\newcommand{\SetTitleDocumentInSecondPage}
{%
    \spboxmm{65}{0}{120}{25}{lc}{\parbox{70mm}{\centering\largeit{\@gosttitleobjectI} \normalfontit{\\ \@gosttitledocument} }}
}%


\newcommand{\DrawFieldTopFirst}
{%
  \begin{picture}(0,0)%
    \setlength{\unitlength}{1mm}%
    \linethickness{\pcbdoclinethick}%
    \put(-12,167){\line(0,1){120}}%
    \put(-7,167){\line(0,1){120}}%
    \put(0,167){\line(-1,0){12}}%
    \put(0,227){\line(-1,0){12}}%
    \put(0,287){\line(-1,0){12}}%   
    \put(-12,0)
    {%
      \vspformedboxmm{0}{167}{5}{227}{c}{\normalfontit Справ. №}
      \vspformedboxmm{0}{227}{5}{287}{c}{\normalfontit Перв. примен.}
      \vspformedboxmm{5}{227}{12}{287}{c}{\largeit\@gostferstklgi}
    }%
  \end{picture}%
}%


\newcommand{\DrawFieldBottomFirst}
{%
  \begin{picture}(0,0)%
    \setlength{\unitlength}{1mm}%
    \linethickness{\pcbdoclinethin}%
    \put(65,40){\line(0,1){22}}%
    \put(79,48){\line(0,1){14}}%
    \put(132,48){\line(0,1){14}}% 
    \put(65,48){\line(1,0){120}}%
    \put(65,62){\line(1,0){120}}%   
    \spformedboxmm{79}{53}{132}{58}{c}{\largeit \@gostreshenie}    
  \end{picture}%
}%


\newcommand{\DrawStampNext}
{%
  \begin{picture}(0,0)%
    \setlength{\unitlength}{1mm}%
    \linethickness{\pcbdoclinethick}%
 %   \ifthenelse{\equal{\pcbdocpapersize}{a4}}{}{\put(0,0){\line(0,1){15}}}%
    \put(7,0){\line(0,1){15}}%
    \put(17,0){\line(0,1){15}}%
    \put(40,0){\line(0,1){15}}%
    \put(55,0){\line(0,1){15}}%
    \put(65,0){\line(0,1){15}}%
    \put(175,0){\line(0,1){15}}%
    \put(185,0){\line(0,1){15}}%
    \put(0,15){\line(1,0){185}}%
    \put(175,8){\line(1,0){10}}%
    \linethickness{\pcbdoclinethin}%
    \put(0,5){\line(1,0){65}}%
    \put(0,10){\line(1,0){65}}%
    \spformedboxmm{0}{0}{7}{4.1}{tc}{\normalfontit Изм.}
    \spformedboxmm{7}{0}{17}{4.1}{tc}{\normalfontit Лист}
    \spformedboxmm{17}{0}{40}{4.1}{tc}{\normalfontit № докум.}
    \spformedboxmm{40}{0}{55}{4.1}{tc}{\normalfontit Подпись}   
    \spformedboxmm{55}{0}{65}{4.1}{tc}{\normalfontit Дата}
    \spformedboxmm{175}{8}{185}{13.38}{tc}{\normalfontit Лист}    
    \spformedboxmm{175}{0}{185}{5.5}{tc}{\normalfontit \thepage}
    \spformedboxmm{65}{5}{175}{10}{tc}{\Largeit \@gostklgi}    
  \end{picture}%
}%


\newcommand{\DrawFieldBottomNext}
{%
  \begin{picture}(0,0)%
    \setlength{\unitlength}{1mm}%
    \linethickness{\pcbdoclinethick}%
    \put(-7,0){\line(0,1){145}}%
    \put(-12,0){\line(0,1){145}}%
    \put(0,0){\line(-1,0){12}}%
    \put(0,25){\line(-1,0){12}}%
    \put(0,60){\line(-1,0){12}}%
    \put(0,85){\line(-1,0){12}}%
    \put(0,110){\line(-1,0){12}}%
    \put(0,145){\line(-1,0){12}}%  
    \put(-12,0)
    {%
      \vspformedboxmm{0}{0}{5}{25}{c}{\normalfontit Инв. № подл.}
      \vspformedboxmm{0}{25}{5}{60}{c}{\normalfontit Подп. и дата}
      \vspformedboxmm{0}{60}{5}{85}{c}{\normalfontit Взам. инв. №}
      \vspformedboxmm{0}{85}{5}{110}{c}{\normalfontit Инв. № дубл.}
      \vspformedboxmm{0}{110}{5}{145}{c}{\normalfontit Подп. и дата.}
    }%
  \end{picture}%
}%


\newcommand{\DrawFieldBottomBotNext}
{%
  \begin{picture}(0,0)%
    \spformedboxmm{10}{-5}{30}{-1.0}{tc}{\normalfontit Ф.2.106-9а}
    \spformedboxmm{60}{-5}{80}{-1.0}{tc}{\normalfontit Копировал:}
    \spformedboxmm{145}{-5}{165}{-1.0}{tc}{\normalfontit Формат А4}
  \end{picture}%
}%


\newcommand{\DrawFieldBottomBotTitle}
{%
  \begin{picture}(0,0)%
    \spformedboxmm{10}{-5}{30}{-1.0}{tc}{\normalfontit Ф.2.105-1}
    \spformedboxmm{60}{-5}{80}{-1.0}{tc}{\normalfontit Копировал:}
    \spformedboxmm{145}{-5}{165}{-1.0}{tc}{\normalfontit Формат А4}
  \end{picture}%
}%


\newcommand{\DrawFieldBottomBotRegCheng}
{%
  \begin{picture}(0,0)%
    \spformedboxmm{10}{-5}{30}{-1.0}{tc}{\normalfontit Ф.2.503-3}
    \spformedboxmm{60}{-5}{80}{-1.0}{tc}{\normalfontit Копировал:}
    \spformedboxmm{145}{-5}{165}{-1.0}{tc}{\normalfontit Формат А4}
  \end{picture}%
}%


\newcommand{\DrawRegCheng}
{%
  \begin{picture}(0,0)%
    \setlength{\unitlength}{1mm}%
    \linethickness{\pcbdoclinethick}%
    \put(0,279){\line(1,0){185}}%
    \put(0,259){\line(1,0){185}}%
    \put(0,27){\line(1,0){185}}% 
    \put(12,271){\line(1,0){77}}%     
    \put(12,27){\line(0,1){252}}%
    \put(32,27){\line(0,1){244}}%   
    \put(52,27){\line(0,1){244}}% 
    \put(68,27){\line(0,1){244}}% 
    \put(89,27){\line(0,1){252}}% 
    \put(114,27){\line(0,1){252}}% 
    \put(129,27){\line(0,1){252}}% 
    \put(157,27){\line(0,1){252}}% 
    \put(172,27){\line(0,1){252}}%        
    \linethickness{\pcbdoclinethin}%    
    \put(0,251){\line(1,0){185}}%
    \put(0,243){\line(1,0){185}}%
    \put(0,235){\line(1,0){185}}%
    \put(0,227){\line(1,0){185}}%
    \put(0,219){\line(1,0){185}}%
    \put(0,211){\line(1,0){185}}%
    \put(0,203){\line(1,0){185}}%
    \put(0,195){\line(1,0){185}}%
    \put(0,187){\line(1,0){185}}%
    \put(0,179){\line(1,0){185}}%
    \put(0,171){\line(1,0){185}}%
    \put(0,163){\line(1,0){185}}%
    \put(0,155){\line(1,0){185}}%
    \put(0,147){\line(1,0){185}}%
    \put(0,139){\line(1,0){185}}%
    \put(0,131){\line(1,0){185}}%
    \put(0,123){\line(1,0){185}}%
    \put(0,115){\line(1,0){185}}%
    \put(0,107){\line(1,0){185}}%
    \put(0,99){\line(1,0){185}}%
    \put(0,91){\line(1,0){185}}%
    \put(0,83){\line(1,0){185}}%
    \put(0,75){\line(1,0){185}}%
    \put(0,67){\line(1,0){185}}%
    \put(0,59){\line(1,0){185}}%
    \put(0,51){\line(1,0){185}}%
    \put(0,43){\line(1,0){185}}%
    \put(0,35){\line(1,0){185}}% 
    \spformedboxmm{0}{279}{185}{287}{c}{\largeit Лист регистрации изменений}
    \spformedboxmm{12}{271}{89}{279}{c}{\normalfontit Номера листов (страниц)}    
    \spformedboxmm{0}{259}{12}{279}{c}{\normalfontit Изм.}     
    \spboxmm{12}{259}{32}{271}{lc}{\parbox{20mm}{\centering\normalfontit изменён-\\ \vskip -3mm ных}}
    \spboxmm{32}{259}{52}{271}{lc}{\parbox{20mm}{\centering\normalfontit заменён-\\ \vskip -3mm ных}}
    \spboxmm{52}{259}{68}{271}{lc}{\parbox{17mm}{\centering\normalfontit новых}}
    \spboxmm{68}{259}{89}{271}{lc}{\parbox{20mm}{\centering\normalfontit аннули-\\ \vskip -3mm  рован-\\ \vskip -3mm ных}}
    \spboxmm{89}{259}{114}{279}{lc}{\parbox{25mm}{\centering\normalfontit Всего\\ \vskip -3mm  листов-\\ \vskip -3mm (страниц) в \\ \vskip -3mm докум.}}
    \spboxmm{114}{259}{129}{279}{lc}{\parbox{15mm}{\centering\normalfontit №\\ \vskip -3mm докум.}}
    \spboxmm{129}{259}{157}{279}{lc}{\parbox{28mm}{\centering\normalfontit Входящий №\\ \vskip -3mm  сопроводи-\\ \vskip -3mm тельного \\ \vskip -3mm докум.~и~дата}}
    \spboxmm{157}{259}{172}{279}{lc}{\parbox{14mm}{\centering\normalfontit Подп.}}
    \spboxmm{172}{259}{185}{279}{lc}{\parbox{14mm}{\centering\normalfontit Дата}}
  \end{picture}%
}%


\newcommand{\DrawAII}
{%
  \setlength{\unitlength}{1mm}%
  \begin{picture}(0,0)%
    \linethickness{\pcbdoclinethick}%
    \put(0,0){\line(1,0){569}}% нижняя линия
    \put(0,410){\line(1,0){569}}% верхняя линия
    \put(0,0){\line(0,1){410}}% левая линия
    \put(569,0){\line(0,1){410}}% правая линия
    \put(384,0){\DrawStampNext}%
    \put(384,0){\line(0,1){15}}% правая линия
    \put(0,0){\DrawFieldBottomNext}%
    \put(0,0)
    {%
      \begin{picture}(0,0)%	     
        \spformedboxmm{10}{-5}{30}{-1.0}{tc}{\normalfontit Ф.2.106-9а}
      \end{picture}%
    }%
    \put(384,0)
    {%
      \begin{picture}(0,0)%
        \spformedboxmm{60}{-5}{80}{-1.0}{tc}{\normalfontit Копировал:}
        \spformedboxmm{145}{-5}{165}{-1.0}{tc}{\normalfontit Формат А2}
      \end{picture}%
    }%  
  \end{picture}%
}%


\newcommand{\DrawAIII}
{%
  \setlength{\unitlength}{1mm}%
  \begin{picture}(0,0)%
     \linethickness{\pcbdoclinethick}%
     \put(0,0){\line(1,0){395}}% нижняя линия
     \put(0,287){\line(1,0){395}}% верхняя линия
     \put(0,0){\line(0,1){287}}% левая линия
     \put(395,0){\line(0,1){287}}% правая линия
     \put(210,0){\DrawStampNext}%
     \put(210,0){\line(0,1){15}}% правая линия
     \put(0,0){\DrawFieldBottomNext}%
     \put(0,0)
     {%
       \begin{picture}(0,0)%	     
         \spformedboxmm{10}{-5}{30}{-1.0}{tc}{\normalfontit Ф.2.106-9а}
       \end{picture}%
     }%
     \put(210,0)
     {%
       \begin{picture}(0,0)%
         \spformedboxmm{60}{-5}{80}{-1.0}{tc}{\normalfontit Копировал:}
         \spformedboxmm{145}{-5}{165}{-1.0}{tc}{\normalfontit Формат А3}
       \end{picture}%
     }%  
  \end{picture}
}%


\newcommand{\DrawAI}
{%
   \setlength{\unitlength}{1mm}%
   \begin{picture}(0,0)%
      \linethickness{\pcbdoclinethick}%
      \put(0,0){\line(1,0){816}}% нижняя линия
      \put(0,583.5){\line(1,0){816}}% верхняя линия
      \put(0,0){\line(0,1){583.5}}% левая линия
      \put(816,0){\line(0,1){583.5}}% правая линия
      \put(631,0){\DrawStampNext}%
      \put(631,0){\line(0,1){15}}% правая линия
      \put(0,0){\DrawFieldBottomNext}%
      \put(0,0)
      {%
        \begin{picture}(0,0)%	     
          \spformedboxmm{10}{-5}{30}{-1.0}{tc}{\normalfontit Ф.2.106-9а}
        \end{picture}%
      }%
      \put(631,0)
      {%
        \begin{picture}(0,0)%
          \spformedboxmm{60}{-5}{80}{-1.0}{tc}{\normalfontit Копировал:}
          \spformedboxmm{145}{-5}{165}{-1.0}{tc}{\normalfontit Формат А1}
        \end{picture}%
      }%  
    \end{picture}%
}%


\newcommand{\DrawAIV}
{%
   \setlength{\unitlength}{1mm}%
   \begin{picture}(0,0)%
      \put(0,0){\DrawBorder}%
      \put(0,0){\DrawStampNext}%
      \put(0,0){\DrawFieldBottomNext}%
      \put(0,0){\DrawFieldBottomBotNext}%	   	   
   \end{picture}
}%


\newcommand{\DrawRegChanges}
{%
   \setlength{\unitlength}{1mm}%
   \begin{picture}(0,0)%
     \put(0,0){\DrawBorder}%
     \put(0,0){\DrawStampNext}%
     \put(0,0){\DrawFieldBottomNext}%
     \put(0,0){\DrawFieldBottomBotRegCheng}%
     \put(0,0){\DrawRegCheng}%   
   \end{picture}
}%


\newcommand{\DrawStampPage}
{%
  \setlength{\unitlength}{1mm}%
  \begin{picture}(0,0)%
    \put(0,0){\DrawBorder}%
    \put(0,0){\DrawStampFirst}%
    \put(0,0){\DrawFieldBottomNext}%
    \put(0,0){\DrawFieldBottomFirst}%
    \put(0,0){\DrawFieldTopFirst}%  
  \end{picture}
}%


\newcommand{\DrawAIVmirrored}
{%
  \setlength{\unitlength}{1mm}%
  \begin{picture}(0,0)%
    \put(0,0){\DrawBorder}%
    \put(0,0)
    {%
      \begin{picture}(0,0)%
        \linethickness{\pcbdoclinethick}%
     %   \ifthenelse{\equal{\pcbdocpapersize}{a4}}{}{\put(0,0){\line(0,1){15}}}%
        \put(178,0){\line(0,1){15}}%
        \put(168,0){\line(0,1){15}}%
        \put(145,0){\line(0,1){15}}%
        \put(130,0){\line(0,1){15}}%
        \put(120,0){\line(0,1){15}}%
        \put(10,0){\line(0,1){15}}%
        \put(0,0){\line(0,1){15}}%
        \put(0,15){\line(1,0){185}}%
        \put(0,8){\line(1,0){10}}%
        \linethickness{\pcbdoclinethin}%
        \put(185,5){\line(-1,0){65}}%
        \put(185,10){\line(-1,0){65}}%
        \spformedboxmm{178}{0}{185}{4.1}{tc}{\normalfontit Изм.}
        \spformedboxmm{168}{0}{178}{4.1}{tc}{\normalfontit Лист}
        \spformedboxmm{145}{0}{168}{4.1}{tc}{\normalfontit № докум.}
        \spformedboxmm{130}{0}{145}{4.1}{tc}{\normalfontit Подпись}   
        \spformedboxmm{120}{0}{130}{4.1}{tc}{\normalfontit Дата}
        \spformedboxmm{0}{8}{10}{13.38}{tc}{\normalfontit Лист}    
        \spformedboxmm{0}{0}{10}{5.5}{tc}{\normalfontit \thepage}
        \spformedboxmm{10}{5}{120}{10}{tc}{\Largeit \@gostklgi}    
      \end{picture}%
    }%     
    \put(0,0)
    {%    
      \begin{picture}(0,0)%
        \setlength{\unitlength}{1mm}%
        \linethickness{\pcbdoclinethick}%
        \put(192,0){\line(0,1){145}}%
        \put(197,0){\line(0,1){145}}%
        \put(185,0){\line(1,0){12}}%
        \put(185,25){\line(1,0){12}}%
        \put(185,60){\line(1,0){12}}%
        \put(185,85){\line(1,0){12}}%
        \put(185,110){\line(1,0){12}}%
        \put(185,145){\line(1,0){12}}%
        \put(192,0)
        {%
          \vspformedboxmm{0}{0}{5}{25}{c}{\normalfontit Инв. № подл.}
          \vspformedboxmm{0}{25}{5}{60}{c}{\normalfontit Подп. и дата}
          \vspformedboxmm{0}{60}{5}{85}{c}{\normalfontit Взам. инв. №}
          \vspformedboxmm{0}{85}{5}{110}{c}{\normalfontit Инв. № дубл.}
          \vspformedboxmm{0}{110}{5}{145}{c}{\normalfontit Подп. и дата.}
        }%
      \end{picture}%
    }% 
    \put(0,0){\DrawFieldBottomBotNext}%
  \end{picture}
}%


